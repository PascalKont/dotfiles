{{- if eq .hosttype "work" "private" "full"}}
{{- if eq .chezmoi.os "linux" -}}
#!/usr/bin/env bash
set -euo pipefail

# Check if Git is already installed
if command -v git &>/dev/null; then
  #echo "Git is already installed."
  exit 0
fi

# Detect OS
OS=$(uname | tr '[:upper:]' '[:lower:]')
echo "Detected OS: $OS"

install_git() {
  if command -v dnf &>/dev/null; then
    echo "Installing Git via dnf..."
    sudo dnf install -y git
  elif command -v apt-get &>/dev/null; then
    echo "Installing Git via apt-get..."
    sudo apt-get update
    sudo apt-get install -y git
  elif command -v yum &>/dev/null; then
    echo "Installing Git via yum..."
    sudo yum install -y git
  elif command -v pacman &>/dev/null; then
    echo "Installing Git via pacman..."
    sudo pacman -Sy --noconfirm git
  else
    echo "No supported package manager found. Please install Git manually."
    exit 1
  fi
}

# Run the installation
install_git

# Verify installation
if command -v git &>/dev/null; then
  echo "Git successfully installed."
else
  echo "Git installation failed."
  exit 1
fi

{{- end }}
{{- end }}
